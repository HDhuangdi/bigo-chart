!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("core-js/modules/es6.array.map.js"),require("core-js/modules/es6.array.fill.js"),require("core-js/modules/es6.object.to-string.js"),require("core-js/modules/es6.regexp.to-string.js"),require("core-js/modules/es6.regexp.constructor.js"),require("core-js/modules/es6.regexp.replace.js"),require("core-js/modules/es7.string.pad-start.js"),require("core-js/modules/es6.array.slice.js"),require("core-js/modules/es6.regexp.split.js"),require("core-js/modules/es6.number.constructor.js"),require("core-js/modules/es6.array.filter.js"),require("core-js/modules/es6.function.name.js"),require("core-js/modules/es6.symbol.js"),require("core-js/modules/es6.array.from.js"),require("core-js/modules/es6.string.iterator.js"),require("core-js/modules/es6.array.iterator.js"),require("core-js/modules/web.dom.iterable.js"),require("core-js/modules/es6.array.find.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.array.map.js","core-js/modules/es6.array.fill.js","core-js/modules/es6.object.to-string.js","core-js/modules/es6.regexp.to-string.js","core-js/modules/es6.regexp.constructor.js","core-js/modules/es6.regexp.replace.js","core-js/modules/es7.string.pad-start.js","core-js/modules/es6.array.slice.js","core-js/modules/es6.regexp.split.js","core-js/modules/es6.number.constructor.js","core-js/modules/es6.array.filter.js","core-js/modules/es6.function.name.js","core-js/modules/es6.symbol.js","core-js/modules/es6.array.from.js","core-js/modules/es6.string.iterator.js","core-js/modules/es6.array.iterator.js","core-js/modules/web.dom.iterable.js","core-js/modules/es6.array.find.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).BigoChart=e()}(this,(function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=e((function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r},t.exports.default=t.exports,t.exports.__esModule=!0}));t(i);var r=e((function(t){t.exports=function(t){if(Array.isArray(t))return i(t)},t.exports.default=t.exports,t.exports.__esModule=!0}));t(r);var a=e((function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0}));t(a);var o=e((function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0}));t(o);var n=e((function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}));t(n);var s=t(e((function(t){t.exports=function(t){return r(t)||a(t)||o(t)||n()},t.exports.default=t.exports,t.exports.__esModule=!0}))),h=t(e((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0}))),l=t(e((function(t){function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0}))),c=t(e((function(t){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.default=t.exports,t.exports.__esModule=!0})));function d(t,e){var i,r={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var a in r)(i=new RegExp("("+a+")").exec(t))&&(t=t.replace(i[1],1===i[1].length?r[a]:r[a].padStart(i[1].length,"0")));return t}function u(t,e){if(0===t)return"0.00";if(!t)return"--";var i=t.toString().split(".")[1],r=Number(t.toString().split(".")[0]);return i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if(void 0!==e)if(0!==e)if(t)if(t.length>e)t=t.slice(0,e);else for(var i=0,r=e-t.length;i<r;i++)t+="0";else for(var a=0;a<e;a++)t+="0";else 0===e&&(t="");return t&&(t="."+t),t}(i,e),-1!==t.toString().indexOf("-")&&Math.abs(parseFloat(r))<=0?"-"+"".concat(r).concat(i):"".concat(r).concat(i)}var f=function(){function t(){h(this,t),c(this,"view",void 0),c(this,"service",void 0),c(this,"chart",void 0),c(this,"isMouseDown",!1),c(this,"prevMousePosition",{}),c(this,"nowMousePosition",{}),c(this,"dragCoefficient",1e3)}return l(t,[{key:"inject",value:function(t,e,i){this.view=t,this.service=e,this.chart=i}},{key:"registerMouseEvents",value:function(){var t=this.view;t.canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),t.canvas.addEventListener("mousemove",this.onMouseMove.bind(this)),t.canvas.addEventListener("mouseup",this.onMouseUp.bind(this)),t.canvas.addEventListener("mousewheel",this.onMouseWeel.bind(this))}},{key:"onMouseDown",value:function(t){this.isMouseDown=!0,this.prevMousePosition={x:t.offsetX,y:t.offsetY}}},{key:"onMouseMove",value:function(t){var e=this.chart,i=this.view,r=this.service,a=t.offsetX,o=t.offsetY;if(this.nowMousePosition={x:a,y:o},!this.isMouseDown)return i.draw();r.dataZoom.user=!0;var n=this.prevMousePosition.x-this.nowMousePosition.x,s=e.bars[0].time,h=r.dataZoom.xAxisStartValue+this.dragCoefficient*n,l=r.dataZoom.xAxisEndValue+this.dragCoefficient*n;h-100*e.tickerUnit<=s?r.loadMoreData():(this.dragCoefficient=i.xAxisUnitsVisiable/e.tickerUnit*40,r.updateDataZoom(h,l),i.draw(),this.prevMousePosition={x:a,y:o})}},{key:"onMouseUp",value:function(){this.isMouseDown=!1}},{key:"onMouseWeel",value:function(t){var e,i,r,a=this.view,o=this.service;if(o.dataZoom.user=!0,t.wheelDelta?(e=t.wheelDelta/120,window.opera&&(e=-e)):t.detail&&(e=-t.detail/3),e>=0){if(o.dataZoom.data.length<=20)return;i=o.dataZoom.xAxisStartValue+12e4,r=o.dataZoom.xAxisEndValue-12e4}else{if(o.dataZoom.data.length>=200)return;i=o.dataZoom.xAxisStartValue-12e4,r=o.dataZoom.xAxisEndValue+12e4}o.updateDataZoom(i,r),a.draw()}}]),t}(),v=e((function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0}));t(v);var p=e((function(t){t.exports=function(t,e){var i=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=i){var r,a,o=[],n=!0,s=!1;try{for(i=i.call(t);!(n=(r=i.next()).done)&&(o.push(r.value),!e||o.length!==e);n=!0);}catch(t){s=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(s)throw a}}return o}},t.exports.default=t.exports,t.exports.__esModule=!0}));t(p);var m=e((function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}));t(m);var g=t(e((function(t){t.exports=function(t,e){return v(t)||p(t,e)||o(t,e)||m()},t.exports.default=t.exports,t.exports.__esModule=!0}))),x=t(e((function(t){function e(t,e,i,r,a,o,n){try{var s=t[o](n),h=s.value}catch(t){return void i(t)}s.done?e(h):Promise.resolve(h).then(r,a)}t.exports=function(t){return function(){var i=this,r=arguments;return new Promise((function(a,o){var n=t.apply(i,r);function s(t){e(n,a,o,s,h,"next",t)}function h(t){e(n,a,o,s,h,"throw",t)}s(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0}))),y=e((function(t){var e=function(t){var e,i=Object.prototype,r=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",n=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function l(t,e,i,r){var a=e&&e.prototype instanceof m?e:m,o=Object.create(a.prototype),n=new D(r||[]);return o._invoke=function(t,e,i){var r=d;return function(a,o){if(r===f)throw new Error("Generator is already running");if(r===v){if("throw"===a)throw o;return T()}for(i.method=a,i.arg=o;;){var n=i.delegate;if(n){var s=M(n,i);if(s){if(s===p)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===d)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var h=c(t,e,i);if("normal"===h.type){if(r=i.done?v:u,h.arg===p)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=v,i.method="throw",i.arg=h.arg)}}}(t,i,n),o}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d="suspendedStart",u="suspendedYield",f="executing",v="completed",p={};function m(){}function g(){}function x(){}var y={};y[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(k([])));_&&_!==i&&r.call(_,o)&&(y=_);var A=x.prototype=m.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function i(a,o,n,s){var h=c(t[a],t,o);if("throw"!==h.type){var l=h.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,n,s)}),(function(t){i("throw",t,n,s)})):e.resolve(d).then((function(t){l.value=t,n(l)}),(function(t){return i("throw",t,n,s)}))}s(h.arg)}var a;this._invoke=function(t,r){function o(){return new e((function(e,a){i(t,r,e,a)}))}return a=a?a.then(o,o):o()}}function M(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,M(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=c(r,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,p;var o=a.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function U(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function k(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,n=function i(){for(;++a<t.length;)if(r.call(t,a))return i.value=t[a],i.done=!1,i;return i.value=e,i.done=!0,i};return n.next=n}}return{next:T}}function T(){return{value:e,done:!0}}return g.prototype=A.constructor=x,x.constructor=g,g.displayName=h(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},b(E.prototype),E.prototype[n]=function(){return this},t.AsyncIterator=E,t.async=function(e,i,r,a,o){void 0===o&&(o=Promise);var n=new E(l(e,i,r,a),o);return t.isGeneratorFunction(i)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},b(A),h(A,s,"Generator"),A[o]=function(){return this},A.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=k,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(U),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function a(r,a){return s.type="throw",s.arg=t,i.next=r,a&&(i.method="next",i.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],s=n.completion;if("root"===n.tryLoc)return a("end");if(n.tryLoc<=this.prev){var h=r.call(n,"catchLoc"),l=r.call(n,"finallyLoc");if(h&&l){if(this.prev<n.catchLoc)return a(n.catchLoc,!0);if(this.prev<n.finallyLoc)return a(n.finallyLoc)}else if(h){if(this.prev<n.catchLoc)return a(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return a(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var n=o?o.completion:{};return n.type=t,n.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),U(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var a=r.arg;U(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:k(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}})),w=function(){function t(){h(this,t),c(this,"view",void 0),c(this,"controller",void 0),c(this,"chart",void 0),c(this,"unitToXAxisPx",0),c(this,"candleUnitToYAxisPx",0),c(this,"volumeUnitToYAxisPx",0),c(this,"highestVolume",void 0),c(this,"dataZoom",{}),c(this,"loadMorePending",void 0),c(this,"hasMoreData",!0),c(this,"yAxisBuffer",.1)}var e;return l(t,[{key:"inject",value:function(t,e,i){this.view=t,this.controller=e,this.chart=i}},{key:"calcUnitToXAxisPx",value:function(){var t=this.view;this.unitToXAxisPx=t.xAxisUnitsVisiable/t.chartWidth}},{key:"calcUnitToYAxisPx",value:function(){var t=this.view;this.candleUnitToYAxisPx=(this.dataZoom.klineYAxisEndValue-this.dataZoom.klineYAxisStartValue)/t.klineChartHeight,this.volumeUnitToYAxisPx=(this.dataZoom.volumeYAxisEndValue-this.dataZoom.volumeYAxisStartValue)/t.volumeChartHeight}},{key:"calcXAxisCoordinate",value:function(){var t=this,e=this.chart,i=Math.floor(this.dataZoom.data.length/8);console.log();for(var r=[],a=0;a<e.bars.length;a+=i)r.push({time:e.bars[a].time,value:0});return r.map((function(e){return{x:t.mapDataToCoordinate(e.time,e.value).x,y:0,time:e.time}}))}},{key:"calcYAxisCoordinate",value:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kline",r=this.view,a=this.highestVolume;"kline"===i?(e=r.chartYAxisUnitsVisiable,t=(this.dataZoom.klineYAxisEndValue-this.dataZoom.klineYAxisStartValue)/(r.chartYAxisUnitsVisiable-1)):(e=r.volumeYAxisUnitsVisiable,t=(a-this.dataZoom.volumeYAxisStartValue)/(r.volumeYAxisUnitsVisiable-1));for(var o=[],n=0;n<e;n++){var s=void 0;s="kline"===i?this.dataZoom.klineYAxisStartValue+n*t:this.dataZoom.volumeYAxisStartValue+n*t;var h=this.mapDataToCoordinate(0,s,i);o.push({x:r.padding.left+r.chartWidth,y:h.y,value:s})}return o}},{key:"calcPadding",value:function(t){var e=this.chart,i=this.view,r=e.canvasUtils.getTextWidthAndHeight(i.axisLabelSize*i.dpr,"sans-serif",u(Math.max.apply(Math,s(t.map((function(t){return t.high})))),e.priceDigitNumber)).width;i.padding.top=15*i.dpr,i.padding.bottom=20*i.dpr,i.padding.left=15*i.dpr,i.padding.right=r+10*i.dpr,i.chartHeight=i.canvasHeight-i.padding.top-i.padding.bottom,i.klineChartHeight=i.chartHeight-i.volumeChartHeight,i.chartWidth=i.canvasWidth-i.padding.left-i.padding.right}},{key:"updateDataZoom",value:function(t,e){var i=this.chart,r=i.bars[i.bars.length-1].time,a=i.bars[0].time;r<t||a>e||(this.dataZoom.xAxisStartValue=t,this.dataZoom.xAxisEndValue=e)}},{key:"calcDataZoom",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update",i=this.chart,r=this.view;if("init"===e){var a=i.bars[i.bars.length-1].time+3*i.tickerUnit,o=a-r.xAxisUnitsVisiable;this.updateDataZoom(o,a)}else"update"===e&&(r.xAxisUnitsVisiable=this.dataZoom.xAxisEndValue-this.dataZoom.xAxisStartValue);this.dataZoom.data=i.bars.filter((function(e){return e.time<=t.dataZoom.xAxisEndValue&&e.time>=t.dataZoom.xAxisStartValue})),this.dataZoom.realData=i.bars.filter((function(e){return e.time<=t.dataZoom.xAxisEndValue+i.tickerUnit&&e.time>=t.dataZoom.xAxisStartValue-i.tickerUnit}));var n=Array.prototype.concat([],this.dataZoom.realData).sort((function(t,e){return e.high-t.high})),h=n[0].high;n.sort((function(t,e){return t.low-e.low}));var l=n[0].low;this.dataZoom.klineYAxisEndValue=h+(h-l)*this.yAxisBuffer,this.dataZoom.klineYAxisStartValue=l-(h-l)*this.yAxisBuffer,this.highestVolume=Math.max.apply(Math,s(n.map((function(t){return t.volume})))),this.dataZoom.volumeYAxisEndValue=this.highestVolume+this.highestVolume*this.yAxisBuffer,this.dataZoom.volumeYAxisStartValue=0}},{key:"calcMAPoints",value:function(){var t=this.chart;this.calcMAList(),t.MAOptions.forEach((function(e,i,r){for(var a,o=e.interval,n=[],s=[],h=0;h<t.MAData.length;h++){var l={value:t.MAData[h].close,time:t.MAData[h].time};s.push(l),h>=o-1&&(n.push({value:1*(a=s.map((function(t){return t.value})),a.reduce((function(t,e){return t+e}),0)/a.length).toFixed(t.priceDigitNumber),time:l.time}),s.shift())}r[i].points=n}))}},{key:"calcMAList",value:function(){var t=this,e=this.chart;e.MAData=e.bars.filter((function(i){return i.time<=t.dataZoom.xAxisEndValue+e.maxMAInterval*e.tickerUnit&&i.time>=t.dataZoom.xAxisStartValue-e.maxMAInterval*e.tickerUnit}))}},{key:"formatTickerData",value:function(t){t.status=t.close>=t.open?"up":"down",t.amplitude=(100*(t.high-t.low)/t.low).toFixed(2)+"%",t.change=(100*(t.close-t.high)/t.low).toFixed(2)+"%"}},{key:"loadMoreData",value:(e=x(y.mark((function t(){var e,i,r,a;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.chart,i=this.view,!this.loadMorePending&&this.hasMoreData){t.next=3;break}return t.abrupt("return");case 3:if(r=e.bars[0].time,!e.options.loadMore){t.next=18;break}return this.loadMorePending=!0,t.next=8,e.options.loadMore(r);case 8:if(a=t.sent,this.loadMorePending=!1,a){t.next=13;break}return this.hasMoreData=!1,t.abrupt("return");case 13:a.sort((function(t,e){return t.time-e.time})),a[a.length-1].time.time===r.time&&a.splice(a.length-1,1),e.bars=a.concat(e.bars),i.draw();case 18:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"mapDataToCoordinate",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kline",r=this.view,a={x:0,y:0};if(a.x=r.padding.left+1*((t-this.dataZoom.xAxisStartValue)/this.unitToXAxisPx).toFixed(1),"kline"===i){var o=1*((e-this.dataZoom.klineYAxisStartValue)/this.candleUnitToYAxisPx).toFixed(1);a.y=r.padding.top+r.klineChartHeight-o}else{var n=1*((e-this.dataZoom.volumeYAxisStartValue)/this.volumeUnitToYAxisPx).toFixed(1);a.y=r.padding.top+r.chartHeight-n}return a}},{key:"mapCoordinateToData",value:function(t,e){var i=this.chart,r=this.view,a={time:0,value:0,type:""};a.time=Math.floor(this.dataZoom.xAxisStartValue+t*this.unitToXAxisPx);var o=r.klineChartHeight-e;return o<0?(a.type="volume",o=r.chartHeight-e,a.value=1*(this.dataZoom.volumeYAxisStartValue+o*this.volumeUnitToYAxisPx).toFixed(i.priceDigitNumber)):(a.value=1*(this.dataZoom.klineYAxisStartValue+o*this.candleUnitToYAxisPx).toFixed(i.priceDigitNumber),a.type="price"),a}},{key:"findTicker",value:function(t,e){var i=this.chart,r=this.view,a=this.mapCoordinateToData(t-r.padding.left,e-r.padding.top),o=a.time,n=a.type,s=this.dataZoom.data.filter((function(t){return t.time<=o&&t.time+i.tickerUnit>=o}));return{ticker:g(s,1)[0],type:n}}}]),t}(),_=function t(){h(this,t)};c(_,"up","#04BD75"),c(_,"upHighlight","#03A46B"),c(_,"upLowlight","rgba(4,189,117,0.6)"),c(_,"down","#CF304A"),c(_,"downHighlight","#C02944"),c(_,"downLowlight","rgba(207,48,74,0.6)");var A=function t(){h(this,t)};function b(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return E(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==i.return||i.return()}finally{if(s)throw o}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}c(A,"CANVAS_ID","__bigo-chart__"),c(A,"CANDLE_INFO_CONTAINER_ID","__candle-info__"),c(A,"MA_INFO_CONTAINER_ID","__MA-info__"),c(A,"VOL_INFO_CONTAINER_ID","__vol-info__"),c(A,"VOL_SPAN_ID","__vol-span__"),c(A,"VOL_VALUE_ID","__vol-value__"),c(A,"TIME_SPAN_ID","__time-span__"),c(A,"OPEN_SPAN_ID","__open-span__"),c(A,"OPEN_VALUE_ID","__open-value__"),c(A,"HIGH_SPAN_ID","__high-span__"),c(A,"HIGH_VALUE_ID","__high-value__"),c(A,"LOW_SPAN_ID","__low-span__"),c(A,"LOW_VALUE_ID","__low-value__"),c(A,"CLOSE_SPAN_ID","__close-span__"),c(A,"CLOSE_VALUE_ID","__close-value__"),c(A,"CHANGE_SPAN_ID","__change-span__"),c(A,"CHANGE_VALUE_ID","__change-value__"),c(A,"AMPLITUDE_SPAN_ID","__amplitude-span__"),c(A,"AMPLITUDE_VALUE_ID","__amplitude-value__");var M=function(){function t(){h(this,t),c(this,"service",void 0),c(this,"controller",void 0),c(this,"chart",void 0),c(this,"canvas",void 0),c(this,"ctx",void 0),c(this,"dpr",void 0),c(this,"logo",void 0),c(this,"padding",{}),c(this,"canvasHeight",void 0),c(this,"canvasWidth",void 0),c(this,"chartWidth",void 0),c(this,"chartHeight",void 0),c(this,"klineChartHeight",void 0),c(this,"volumeChartHeight",0),c(this,"xAxisUnitsVisiable",72e5),c(this,"chartYAxisUnitsVisiable",8),c(this,"volumeYAxisUnitsVisiable",4),c(this,"axisLabelSize",10),c(this,"scaleHeight",void 0),c(this,"candleWidth",void 0),c(this,"candleMargin",void 0)}return l(t,[{key:"inject",value:function(t,e,i){this.service=t,this.controller=e,this.chart=i}},{key:"createElements",value:function(){var t=this.chart;t.domUtils.setStyle(t.container,{position:"relative"});var e=t.container.getBoundingClientRect(),i=e.height,r=e.width;this.canvas=t.domUtils.createElm("canvas",{id:A.CANVAS_ID,height:i,width:r}),this.ctx=this.canvas.getContext("2d"),t.domUtils.appendElms(this.canvas);var a=t.domUtils.createElm("div",{id:A.CANDLE_INFO_CONTAINER_ID});t.domUtils.appendElms(a,t.container);var o=t.domUtils.createElm("span",{id:A.TIME_SPAN_ID});o.innerHTML="N/A";var n=t.domUtils.createElm("span",{id:A.OPEN_SPAN_ID});n.innerHTML="O:";var s=t.domUtils.createElm("span",{id:A.OPEN_VALUE_ID});s.innerHTML="N/A";var h=t.domUtils.createElm("span",{id:A.HIGH_SPAN_ID});h.innerHTML="H:";var l=t.domUtils.createElm("span",{id:A.HIGH_VALUE_ID});l.innerHTML="N/A";var c=t.domUtils.createElm("span",{id:A.LOW_SPAN_ID});c.innerHTML="L:";var d=t.domUtils.createElm("span",{id:A.LOW_VALUE_ID});d.innerHTML="N/A";var u=t.domUtils.createElm("span",{id:A.CLOSE_SPAN_ID});u.innerHTML="C:";var f=t.domUtils.createElm("span",{id:A.CLOSE_VALUE_ID});f.innerHTML="N/A";var v=t.domUtils.createElm("span",{id:A.CHANGE_SPAN_ID});v.innerHTML="CHANGE:";var p=t.domUtils.createElm("span",{id:A.CHANGE_VALUE_ID});p.innerHTML="N/A";var m=t.domUtils.createElm("span",{id:A.AMPLITUDE_SPAN_ID});m.innerHTML="AMPLITUDE:";var g=t.domUtils.createElm("span",{id:A.AMPLITUDE_VALUE_ID});g.innerHTML="N/A",t.domUtils.appendElms([o,n,s,h,l,c,d,u,f,v,p,m,g],a);var x=t.domUtils.createElm("div",{id:A.MA_INFO_CONTAINER_ID});if(t.MAOptions.forEach((function(e){var i=t.domUtils.createElm("span");i.innerHTML="MA(".concat(e.interval,"):"),t.domUtils.appendElms(i,x);var r=t.domUtils.createElm("span",{id:"__ma-".concat(e.interval,"__"),style:"color:".concat(e.color)});r.innerHTML="N/A",t.domUtils.appendElms(r,x)})),t.domUtils.appendElms(x,t.container),t.options.hasVolume){var y=t.domUtils.createElm("div",{id:A.VOL_INFO_CONTAINER_ID});t.domUtils.appendElms(y,t.container);var w=t.domUtils.createElm("span",{id:A.VOL_SPAN_ID});w.innerHTML="Vol(".concat(t.options.volumeSymbol,"):");var _=t.domUtils.createElm("span",{id:A.VOL_VALUE_ID});t.domUtils.appendElms([w,_],y)}}},{key:"highDefinition",value:function(){this.dpr=window.devicePixelRatio||1;var t=this.canvas.getBoundingClientRect();this.canvas.width=t.width*this.dpr,this.canvas.height=t.height*this.dpr,this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.canvas.style.height=this.canvas.height/this.dpr+"px",this.canvas.style.width=this.canvas.width/this.dpr+"px",this.initChart()}},{key:"initChart",value:function(){var t=this.chart,e=t.domUtils.getDOMElm("#"+A.VOL_INFO_CONTAINER_ID);t.options.hasVolume&&(this.volumeChartHeight=300),e.style="top:".concat(this.canvasHeight-this.volumeChartHeight,"px");var i=t.options.logo;i&&(this.logo=new Image,this.logo.src=i)}},{key:"clearCanvas",value:function(){this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight}},{key:"drawLogo",value:function(){var t=348*this.dpr,e=85.5*this.dpr;this.ctx.drawImage(this.logo,this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e)}},{key:"draw",value:function(){var t=this.service,e=this.controller;t.calcDataZoom(t.dataZoom.user?"update":"init"),this.clearCanvas(),this.drawBg(),this.drawAxis(),this.drawMAs(),this.drawTicker(),this.drawTickerInfo(),this.drawLastTickerPrice(),this.drawCursorCross(e.nowMousePosition.x,e.nowMousePosition.y)}},{key:"drawBg",value:function(){var t=this,e=this.chart;this.ctx.beginPath(),this.ctx.fillStyle=e.options.backgroundColor||"#191b20",this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.logo&&(this.logo.complete?this.drawLogo():this.logo.onload=function(){t.drawLogo()})}},{key:"drawAxis",value:function(){var t=this.service;t.calcUnitToXAxisPx(),t.calcUnitToYAxisPx(),this.drawXAxis(),this.drawYAxis()}},{key:"drawXAxis",value:function(){var t=this.service,e=this.chart,i=t.calcXAxisCoordinate();this.scaleHeight=5*this.dpr,e.canvasUtils.drawLine({x:this.padding.left,y:this.chartHeight+this.padding.top},{x:this.chartWidth+this.padding.left,y:this.chartHeight+this.padding.top},"#34383F");var r,a=b(i);try{for(a.s();!(r=a.n()).done;){var o=r.value,n=o.x;n>=this.padding.left+this.chartWidth||n<=this.padding.left||(e.canvasUtils.drawLine({x:n,y:this.chartHeight+this.padding.top},{x:n,y:this.chartHeight+this.padding.top+this.scaleHeight},"rgb(132, 142, 156)"),e.canvasUtils.drawLine({x:n,y:this.padding.top},{x:n,y:this.chartHeight+this.padding.top},"#24272C"),this.drawLabels({x:n,y:void 0},o.time))}}catch(t){a.e(t)}finally{a.f()}}},{key:"drawYAxis",value:function(){var t=this,e=this.service,i=this.chart;(i.canvasUtils.drawLine({x:this.padding.left+this.chartWidth,y:this.padding.top},{x:this.padding.left+this.chartWidth,y:this.chartHeight+this.padding.top},"#34383F"),e.calcYAxisCoordinate("kline").forEach((function(e){i.canvasUtils.drawLine({x:t.padding.left+t.chartWidth,y:e.y},{x:t.chartWidth+t.padding.top+t.scaleHeight,y:e.y},"rgb(132, 142, 156)"),i.canvasUtils.drawLine({x:t.padding.left,y:e.y},{x:t.chartWidth+t.padding.left,y:e.y},"#24272C"),t.drawLabels({x:void 0,y:e.y},e.value)})),i.options.hasVolume)&&e.calcYAxisCoordinate("volume").forEach((function(e){i.canvasUtils.drawLine({x:t.padding.left+t.chartWidth,y:e.y},{x:t.chartWidth+t.padding.top+t.scaleHeight,y:e.y},"rgb(132, 142, 156)"),i.canvasUtils.drawLine({x:t.padding.left,y:e.y},{x:t.chartWidth+t.padding.left,y:e.y},"#24272C"),t.drawLabels({x:void 0,y:e.y},e.value)}))}},{key:"drawLabels",value:function(t,e){var i=this.chart,r=e;r=t.x?d("HH:MM",new Date(e)):u(r,i.priceDigitNumber),i.canvasUtils.drawText(t.x||this.padding.left+this.chartWidth+this.scaleHeight,t.y||this.chartHeight+this.padding.top+this.scaleHeight,r,this.axisLabelSize*this.dpr+"px sans-serif",t.x?"top":"middle","rgb(132, 142, 156)",t.x?"center":"left")}},{key:"drawTicker",value:function(){var t=this,e=this.service,i=this.chart;e.dataZoom.realData.forEach((function(e){t.drawCandle(e),i.options.hasVolume&&t.drawVolume(e)}))}},{key:"drawCandle",value:function(t){var e=this.service,i=this.chart;e.formatTickerData(t);var r=t.status,a=e.mapDataToCoordinate(t.time,t.open),o=e.mapDataToCoordinate(t.time,t.close),n=e.mapDataToCoordinate(t.time,t.high),s=e.mapDataToCoordinate(t.time,t.low);this.candleMargin=i.tickerUnit/20/e.unitToXAxisPx,this.candleWidth=i.tickerUnit/e.unitToXAxisPx-2*this.candleMargin;var h="up"===r?o.x-this.candleWidth/2:a.x-this.candleWidth/2,l="up"===r?o.y:a.y,c=Math.abs(o.y-a.y),d=this.candleWidth;if(h+d>=this.padding.left+this.chartWidth)(d=d-(h+d-this.padding.left-this.chartWidth)-2*this.dpr)<0&&(d=0);else if(h<this.padding.left){if(h+d<this.padding.left)return;d-=this.padding.left-h,h=this.padding.left}else i.canvasUtils.drawLine({x:a.x,y:n.y},{x:a.x,y:s.y},_[r]);i.canvasUtils.drawRect(h,l,d,c,_[r])}},{key:"drawVolumes",value:function(){var t=this;this.service.dataZoom.realData.forEach((function(e){return t.drawVolume(e)}))}},{key:"drawVolume",value:function(t){var e=this.service,i=this.chart,r=e.mapDataToCoordinate(t.time,t.volume,"volume"),a=r.x,o=r.y,n=this.candleWidth,s=this.canvasHeight-this.padding.bottom-o,h=a-n/2;if(h+n>=this.padding.left+this.chartWidth)(n=n-(h+n-this.padding.left-this.chartWidth)-2*this.dpr)<0&&(n=0);else if(h<this.padding.left){if(h+n<this.padding.left)return;n-=this.padding.left-h,h=this.padding.left}i.canvasUtils.drawRect(h,o,n,s,_[t.status+"Lowlight"])}},{key:"drawMAs",value:function(){var t=this,e=this.service,i=this.chart;e.calcMAPoints(),i.MAOptions.forEach((function(r){var a=r.points.map((function(t){return e.mapDataToCoordinate(t.time,t.value)}));t.ctx.beginPath();for(var o=0;o<a.length;o++){var n=a[o],s=a[o+1];if(!s)break;n.x<=t.padding.left||s.x>=t.chartWidth+t.padding.left||(n.y>t.padding.top+t.klineChartHeight||s.y>t.padding.top+t.klineChartHeight||i.canvasUtils.drawLine({x:n.x,y:n.y},{x:s.x,y:s.y},r.color,!1))}t.ctx.stroke()}))}},{key:"drawTickerInfo",value:function(){var t=this.chart,e=t.cursorTicker||t.bars[t.bars.length-1];this.drawCandleInfo(e);var i,r={},a=b(t.MAOptions);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(r[o.interval]=o.points.find((function(t){return t.time===e.time})),!r[o.interval])return;r[o.interval].color=o.color}}catch(t){a.e(t)}finally{a.f()}this.drawMAInfo(r),t.options.hasVolume&&this.drawVolumeInfo(e)}},{key:"drawCandleInfo",value:function(t){var e=this.chart,i=e.domUtils;e.domUtils.getDOMElm("#"+A.TIME_SPAN_ID).innerHTML=d("YYYY/mm/dd HH:MM",new Date(t.time));var r=e.domUtils.getDOMElm("#"+A.OPEN_VALUE_ID);r.innerHTML=u(t.open,e.priceDigitNumber),i.setStyle(r,{color:_[t.status]});var a=e.domUtils.getDOMElm("#"+A.LOW_VALUE_ID);a.innerHTML=u(t.low,e.priceDigitNumber),i.setStyle(a,{color:_[t.status]});var o=e.domUtils.getDOMElm("#"+A.CLOSE_VALUE_ID);o.innerHTML=u(t.close,e.priceDigitNumber),i.setStyle(o,{color:_[t.status]});var n=e.domUtils.getDOMElm("#"+A.CHANGE_VALUE_ID);n.innerHTML=u(t.change,2),i.setStyle(n,{color:_[t.status]});var s=e.domUtils.getDOMElm("#"+A.AMPLITUDE_VALUE_ID);s.innerHTML=u(t.amplitude,2),i.setStyle(s,{color:_[t.status]})}},{key:"drawMAInfo",value:function(t){var e=this.chart,i=e.domUtils;for(var r in t){var a=t[r],o=e.domUtils.getDOMElm("#__ma-".concat(r,"__"));o.innerHTML=u(a.value,e.priceDigitNumber),i.setStyle(o,{color:a.color})}}},{key:"drawVolumeInfo",value:function(t){var e=this.chart,i=e.domUtils,r=e.domUtils.getDOMElm("#".concat(A.VOL_VALUE_ID));r.innerHTML=u(t.volume,e.volumeDigitNumer),i.setStyle(r,{color:_[t.status]})}},{key:"drawCursorCross",value:function(t,e){if(t&&e){var i=this.chart,r=this.dpr*t,a=this.dpr*e;r>=this.padding.left+this.chartWidth||a>this.padding.top+this.chartHeight?this.canvas.style.cursor="default":(this.canvas.style.cursor="crosshair",r=this.drawCursorLabel(r,a),i.canvasUtils.drawLine({x:this.padding.left,y:a},{x:this.padding.left+this.chartWidth,y:a},"#AEB4BC",!0,[5*this.dpr,5*this.dpr]),i.canvasUtils.drawLine({x:r,y:this.padding.top},{x:r,y:this.padding.top+this.chartHeight},"#AEB4BC",!0,[5*this.dpr,5*this.dpr]))}}},{key:"drawCursorLabel",value:function(t,e){var i=this.chart,r=this.service,a=r.findTicker(t,e),o=a.ticker,n=a.type;if(i.cursorTicker=o,!o)return t;var s=r.mapDataToCoordinate(o.time,0),h=d("YYYY/mm/dd HH:MM",new Date(o.time)),l=i.canvasUtils.getTextWidthAndHeight(this.axisLabelSize*this.dpr,"sans-serif",h),c=l.width,u=l.height,f=c+15*this.dpr,v=this.padding.bottom;i.canvasUtils.drawRect(s.x-f/2,this.chartHeight+this.padding.top,f,v,"#2B2F36"),i.canvasUtils.drawText(s.x,this.chartHeight+this.padding.top+v/2-u/2,h,this.axisLabelSize*this.dpr+"px sans-serif","top","#fff","center");var p="kline"===n?o.close:o.volume;return this.drawYAxisLabelPolygon(e,"#2B2F36","#3D434C",p,n),s.x}},{key:"drawYAxisLabelPolygon",value:function(t,e,i,r,a){var o=this.chart,n=20*this.dpr,s=this.padding.right,h=[{x:this.padding.left+this.chartWidth,y:t},{x:this.padding.left+this.chartWidth+s/6,y:t-n/2},{x:this.padding.left+this.chartWidth+s,y:t-n/2},{x:this.padding.left+this.chartWidth+s,y:t+n/2},{x:this.padding.left+this.chartWidth+s/6,y:t+n/2}];o.canvasUtils.drawPolygon(h,"fill",e,1*this.dpr),o.canvasUtils.drawPolygon(h,"stroke",i,1*this.dpr),o.canvasUtils.drawText(this.padding.left+this.chartWidth+this.scaleHeight,t,"price"===a?u(r,o.priceDigitNumber):r,12*this.dpr+"px ","middle","#fff","left")}},{key:"drawLastTickerPrice",value:function(){var t=this.service,e=t.dataZoom.data[t.dataZoom.data.length-1],i=t.mapDataToCoordinate(e.time,e.close).y;this.drawYAxisLabelPolygon(i,_[e.status],"up"===e.status?_.upHighlight:_.downHighlight,e.close,"price")}}]),t}();return function(){function t(e){var i;h(this,t),c(this,"view",void 0),c(this,"service",void 0),c(this,"controller",void 0),c(this,"options",void 0),c(this,"bars",void 0),c(this,"container",void 0),c(this,"canvasUtils",void 0),c(this,"domUtils",void 0),c(this,"tickerUnit",void 0),c(this,"cursorTicker",void 0),c(this,"priceDigitNumber",2),c(this,"volumeDigitNumer",3),c(this,"MAOptions",[{color:"#FF00FF",interval:7},{color:"#CF3049",interval:25},{color:"#00CCCC",interval:99}]),c(this,"MAData",void 0),c(this,"maxMAInterval",void 0),this.view=new M,this.service=new w,this.controller=new f,this.inject(),this.options=e,this.container=document.querySelector(this.options.el),this.domUtils=function(t){function e(t,e){var i=document.createElement(t);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}function i(e,i){var r=i||t;Array.isArray(e)?e.forEach((function(t){return r.appendChild(t)})):r.appendChild(e)}return{createElm:e,appendElms:i,setStyle:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t.style[i]=e[i])},getDOMElm:function(t,r){var a=document.querySelector(t);if(!a){for(var o=arguments.length,n=new Array(o>2?o-2:0),s=2;s<o;s++)n[s-2]=arguments[s];i(a=e.apply(void 0,n),r)}return a}}}(this.container),this.view.createElements(),this.canvasUtils=(i=this.view.ctx,{drawLine:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0];a&&i.beginPath(),i.setLineDash(o),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.strokeStyle=r,a&&i.stroke()},drawRect:function(t,e,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#fff";i.fillStyle=o,i.lineWidth=1,i.beginPath(),i.rect(t,e,r,a),i.fill()},drawPolygon:function(t,e,r,a){i.beginPath(),i.lineWidth=a,i.moveTo(t[0].x,t[0].y),t.forEach((function(t,e){e>=1&&i.lineTo(t.x,t.y)})),i.lineTo(t[0].x,t[0].y),i[e+"Style"]=r,i.closePath(),i[e]()},drawText:function(t,e,r,a,o,n,s){i.font=a,i.textBaseline=o,i.textAlign=s,i.fillStyle=n,i.fillText(r,t,e)},getTextWidthAndHeight:function(t,e,r){return i.font=t+"px "+e,{width:i.measureText(r).width,height:t}}}),e.MA&&(this.MAOptions=e.MA),this.maxMAInterval=Math.max.apply(Math,s(this.MAOptions.map((function(t){return t.interval})))),this.bars=e.bars.sort((function(t,e){return t.time-e.time})),this.options.hasVolume&&(this.options.hasVolume=this.bars.every((function(t){return!!t.volume}))),this.tickerUnit=this.bars[1].time-this.bars[0].time,this.view.highDefinition(),this.service.calcPadding(this.bars),this.controller.registerMouseEvents(),this.service.calcDataZoom("init"),this.view.draw()}return l(t,[{key:"inject",value:function(){this.service.inject(this.view,this.controller,this),this.controller.inject(this.view,this.service,this),this.view.inject(this.service,this.controller,this)}},{key:"subscribeBars",value:function(t,e,i){var r=this.bars[this.bars.length-1],a={open:r.open,high:r.high,low:r.low,close:t,volume:r.volume,time:r.time};i-r.time>=this.tickerUnit?(a.open=r.close,a.high=t,a.low=t,a.time=i,a.volume=e,this.bars.push(a)):(t>r.high&&(a.high=t),t<r.low&&(a.low=t),a.volume+=e,this.bars[this.bars.length-1]=a),this.view.draw()}}]),t}()}));
